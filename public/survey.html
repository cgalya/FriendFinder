<!DOCTYPE HTML>

<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="assets/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>
  <div class="survey-wrapper">

    <form>

      <h2><strong>Tell us about yourself</strong></h2>
      <h4>Name (Required)</h4>
      <input type="text" name="" id="name" class="form-control" required>

      <h4>Link to Photo Image (Required)</h4>
      <input type="text" name="" id="photo" class="form-control" required>

      <h4>Answer the following questions by selecting a number from 1 to 5.</h4>
      <h4>1 means that you strongly disagree and 5 means that you strongly agree.</h4>

      <fieldset class="one">
        <p>Do you sleep around 90% of the day?</p>
        <div class="radiobtns">
          <input type="radio" name="sleep" value="1"> 1
          <input type="radio" name="sleep" value="2"> 2
          <input type="radio" name="sleep" value="3"> 3
          <input type="radio" name="sleep" value="4"> 4
          <input type="radio" name="sleep" value="5"> 5
        </div>
      </fieldset>

      <fieldset class="two">
        <p>Do you like to sit in boxes?</p>
        <div class="radiobtns">
          <input type="radio" name="box" value="1"> 1
          <input type="radio" name="box" value="2"> 2
          <input type="radio" name="box" value="3"> 3
          <input type="radio" name="box" value="4"> 4
          <input type="radio" name="box" value="5"> 5
        </div>
      </fieldset>

      <fieldset class="one">
        <p>Do you push items off of tables over and over again just to see what will happen?</p>
        <div class="radiobtns">
          <input type="radio" name="tables" value="1"> 1
          <input type="radio" name="tables" value="2"> 2
          <input type="radio" name="tables" value="3"> 3
          <input type="radio" name="tables" value="4"> 4
          <input type="radio" name="tables" value="5"> 5
        </div>
      </fieldset>

      <fieldset class="two">
        <p>Do you love killing all the things?</p>
        <div class="radiobtns">
          <input type="radio" name="killing" value="1"> 1
          <input type="radio" name="killing" value="2"> 2
          <input type="radio" name="killing" value="3"> 3
          <input type="radio" name="killing" value="4"> 4
          <input type="radio" name="killing" value="5"> 5
        </div>
      </fieldset>

      <fieldset class="one">
        <p>Do you think that one day you will finally catch the light from a laser pointer?</p>
        <div class="radiobtns">
          <input type="radio" name="laser" value="1"> 1
          <input type="radio" name="laser" value="2"> 2
          <input type="radio" name="laser" value="3"> 3
          <input type="radio" name="laser" value="4"> 4
          <input type="radio" name="laser" value="5"> 5
        </div>
      </fieldset>

      <fieldset class="two">
        <p>Do you like to snuggle in and get hair all over a basket of fresh, clean laundry?</p>
        <div class="radiobtns">
          <input type="radio" name="laundry" value="1"> 1
          <input type="radio" name="laundry" value="2"> 2
          <input type="radio" name="laundry" value="3"> 3
          <input type="radio" name="laundry" value="4"> 4
          <input type="radio" name="laundry" value="5"> 5
        </div>
      </fieldset>

      <fieldset class="one">
        <p>Do you love pouncing on things?</p>
        <div class="radiobtns">
          <input type="radio" name="pouncing" value="1"> 1
          <input type="radio" name="pouncing" value="2"> 2
          <input type="radio" name="pouncing" value="3"> 3
          <input type="radio" name="pouncing" value="4"> 4
          <input type="radio" name="pouncing" value="5"> 5
        </div>
      </fieldset>

      <fieldset class="two">
        <p>Do you enjoy scratching furniture?</p>
        <div class="radiobtns">
          <input type="radio" name="furniture" value="1"> 1
          <input type="radio" name="furniture" value="2"> 2
          <input type="radio" name="furniture" value="3"> 3
          <input type="radio" name="furniture" value="4"> 4
          <input type="radio" name="furniture" value="5"> 5
        </div>
      </fieldset>

      <fieldset class="one">
        <p>Are you cuddly and yet surprisingly sharp at the same time?</p>
        <div class="radiobtns">
          <input type="radio" name="pointy" value="1"> 1
          <input type="radio" name="pointy" value="2"> 2
          <input type="radio" name="pointy" value="3"> 3
          <input type="radio" name="pointy" value="4"> 4
          <input type="radio" name="pointy" value="5"> 5
        </div>
      </fieldset>

      <fieldset class="two">
        <p>Do you like to wake humans up by scratching their faces?</p>
        <div class="radiobtns">
          <input type="radio" name="faces" value="1"> 1
          <input type="radio" name="faces" value="2"> 2
          <input type="radio" name="faces" value="3"> 3
          <input type="radio" name="faces" value="4"> 4
          <input type="radio" name="faces" value="5"> 5
        </div>
      </fieldset>

      <div class="media">
        <img src="assets/images/cat-friends.png" alt="">
      </div>

      <div id="button">
        <button type="submit" id="submit">Click here to find your new best fur-end!</button>
      </div>

    </form>

  </div>

  <!--############ MODAL #############-->
  <div id="myModal" class="modal">
    <div class="modal-content">
      <h2 id="matchName"></h2>
      <img id="matchImg" src="" alt="">
    </div>
  </div>

</body>

<script src="https://code.jquery.com/jquery.js"></script>
<script>

  // modal is hidden by default
  $("#myModal").hide();

  // submit button click event
  $("#submit").on("click", function () {
    // start with two empty arrays
    var scores = [];
    var radioNames = [];

    // form validation function
    function validateForm() {
      // initially set a variable to true
      var validate = true;
      // empty array
      var names = [];
      // set counter variable to 0
      var counter = 0;
      //for each radio button, get the name attribute and if it's not already in the names array, add it
      $('input:radio').each(function () {
        var rname = $(this).attr('name');
        if ($.inArray(rname, names) == -1) names.push(rname);
      });
      // for each name in the names array, check to see if any radio button with that name has been checked
      // if there are no radio buttons with that name that have been checked, it means a question was skipped and we increase the counter by 1
      $.each(names, function (i, name) {
        if ($('input[name="' + name + '"]:checked').length == 0) {
          counter++;
        }
      });
      // if the counter is greater than zero, set validate to false
      if (counter > 0) {
        validate = false;
      }
      // for each text input, check to see if the value is zero, and if it is, set validate to false
      $('.form-control').each(function () {
        if ($(this).val() === '')
          validate = false;
      });
      // return the value of validate, which will be true if all question fields have been filled
      return validate;
    }

    // if the validateForm function has been returned as true
    if (validateForm() == true) {
      // for each radio button, get the name attribute and if it's not already in the radioNames array, add it
      $('input:radio').each(function () {
        var rname = $(this).attr('name');
        if ($.inArray(rname, radioNames) == -1) radioNames.push(rname);
      });
      // for each item in the radioNames array, find the value of the input button with that name and add its number to the scores array
      $.each(radioNames, function (i, name) {
        scores.push($('input[name="' + name + '"]:checked').val());
      });
      // create an object with the user provided information
      var userData = {
        name: $("#name").val(),
        photo: $("#photo").val(),
        scores: scores
      }

      // grab the URL of the website
      var currentURL = window.location.origin;

      // post the user provided data to the friends api and receive the best friend match data
      $.post(currentURL + "/api/friends", userData, function(data){
        // take the name and photo of the best match to display in the modal
        $("#matchName").text("Your new best friend is: " + data.name + "!");
        $('#matchImg').attr("src", data.photo);

        // show the modal with the best match
        $("#myModal").show();
      });

    }
    else
    {
      // if all the form fields haven't been filled, alert the user
      alert("Please fill out all fields before submitting.");
    }

    return false;
  });




</script>
</html>